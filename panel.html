<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Panel · Arreglos Discursos</title>
<link href="assets/favicon.svg" rel="icon" type="image/svg+xml"/>
<link href="css/styles.css" rel="stylesheet"/>
</head>
<body class="has-topbar">
<div id="topbar"></div>
<div class="container">
<div id="toastHost"></div>
<div class="row">
<div class="col-2">
<div class="card pad">
<h2 class="h1" style="margin-bottom:6px;">Panel</h2>
<div class="muted">Accesos rápidos para cargar personas, asignar y luego imprimir.</div>
<hr class="sep"/>
<div class="row">
<a class="btn primary" href="asignaciones.html">Crear / editar asignaciones</a>
<a class="btn" href="imprimir.html">Imprimir tablero</a>
<a class="btn" href="personas.html">Personas</a>
<a class="btn" href="importar.html">Importar Excel</a>
<a class="btn" href="visitantes.html">Visitantes</a>
<a class="btn" href="salientes.html">Salientes</a>
<a class="btn" href="estadisticas.html">Estadísticas</a>
<a class="btn" href="doc-presi.html">Doc Presidente</a>
<a class="btn" href="usuarios.html">Usuarios</a>
</div>
<hr class="sep"/>
<div class="small muted">
<b>Consejo:</b> cargá primero las personas (con roles), después asignaciones semanales, y por último imprimí.
          </div>
</div>
</div>
<div class="col">
<div class="card pad">
<div class="h2">Estado del usuario</div>
<div class="muted" id="who">—</div>
<hr class="sep"/>
<div class="h2">Estructura en Firestore</div>
<div class="small muted">
<div class="pill">/usuarios/{uid}</div>
<div class="pill">/personas/{id}</div>
<div class="pill">/asignaciones/{id}</div>
<div class="pill">/visitas/{id}</div>
<div class="pill">/discursos/{num}</div>
<div class="pill">/canciones/{num}</div>
</div>
</div>
</div>
</div>
</div>
<script>
(function(){
  if(!('serviceWorker' in navigator)) return;
  let refreshing = false;
  window.addEventListener('load', function(){
    navigator.serviceWorker.register('./sw.js').then(function(reg){
      // Si hay una versión esperando, activala
      if(reg.waiting) reg.waiting.postMessage({type:'SKIP_WAITING'});

      reg.addEventListener('updatefound', function(){
        var nw = reg.installing;
        if(!nw) return;
        nw.addEventListener('statechange', function(){
          if(nw.state === 'installed' && navigator.serviceWorker.controller){
            nw.postMessage({type:'SKIP_WAITING'});
          }
        });
      });
    }).catch(function(e){
      console.log('SW error', e);
    });

    navigator.serviceWorker.addEventListener('controllerchange', function(){
      if(refreshing) return;
      refreshing = true;
      location.reload();
    });
  });
})();
</script><script src="js/pages/panel.js" type="module"></script>
</body>
</html>
